<template><div><h1 id="springbootä¹‹æ–‡ä»¶ä¸Šä¼ " tabindex="-1"><a class="header-anchor" href="#springbootä¹‹æ–‡ä»¶ä¸Šä¼ " aria-hidden="true">#</a> SpringBootä¹‹æ–‡ä»¶ä¸Šä¼ </h1>
<h3 id="_1ã€æ–‡ä»¶ä¸Šä¼ åŸç†" tabindex="-1"><a class="header-anchor" href="#_1ã€æ–‡ä»¶ä¸Šä¼ åŸç†" aria-hidden="true">#</a> 1ã€æ–‡ä»¶ä¸Šä¼ åŸç†ğŸ˜˜</h3>
<div class="language-text line-numbers-mode" data-ext="text"><pre v-pre class="language-text"><code>è¡¨å•çš„enctype å±æ€§è§„å®šåœ¨å‘é€åˆ°æœåŠ¡å™¨ä¹‹å‰åº”è¯¥å¦‚ä½•å¯¹è¡¨å•æ•°æ®è¿›è¡Œç¼–ç ã€‚
å½“è¡¨å•çš„enctype="application/x-www-form-urlencoded"ï¼ˆé»˜è®¤ï¼‰æ—¶ï¼Œformè¡¨å•ä¸­çš„æ•°æ®æ ¼å¼ä¸ºï¼škey=value&amp;key=value
å½“è¡¨å•çš„enctype="multipart/form-data"æ—¶ï¼Œå…¶ä¼ è¾“æ•°æ®å½¢å¼å¦‚ä¸‹
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="C:\Users\ZZZYY\AppData\Roaming\Typora\typora-user-images\image-20221121154809486.png" alt="image-20221121154809486"></p>
<h3 id="_2ã€spirngbootå®ç°æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½" tabindex="-1"><a class="header-anchor" href="#_2ã€spirngbootå®ç°æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½" aria-hidden="true">#</a> 2ã€SpirngBootå®ç°æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ğŸ’±</h3>
<div class="language-text line-numbers-mode" data-ext="text"><pre v-pre class="language-text"><code>Spring Bootå·¥ç¨‹åµŒå…¥çš„tomcaté™åˆ¶äº†è¯·æ±‚çš„æ–‡ä»¶å¤§å°ï¼Œæ¯ä¸ªæ–‡ä»¶çš„é…ç½®æœ€å¤§ä¸º1Mbï¼Œå•æ¬¡è¯·æ±‚çš„æ–‡ä»¶çš„æ€»æ•°ä¸èƒ½å¤§äº10Mbã€‚
è¦æ›´æ”¹è¿™ä¸ªé»˜è®¤å€¼éœ€è¦åœ¨é…ç½®æ–‡ä»¶ï¼ˆå¦‚application.propertiesï¼‰ä¸­åŠ å…¥ä¸¤ä¸ªé…ç½®

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="C:\Users\ZZZYY\AppData\Roaming\Typora\typora-user-images\image-20221121154852302.png" alt="image-20221121154852302"></p>
<h3 id="_3ã€spirngbootå®ç°æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½" tabindex="-1"><a class="header-anchor" href="#_3ã€spirngbootå®ç°æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½" aria-hidden="true">#</a> 3ã€SpirngBootå®ç°æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ğŸ”¤</h3>
<div class="language-java line-numbers-mode" data-ext="java"><pre v-pre class="language-java"><code>å½“è¡¨å•çš„enctype<span class="token operator">=</span><span class="token string">"multipart/form-data"</span>æ—¶<span class="token punctuation">,</span>å¯ä»¥ä½¿ç”¨<span class="token class-name">MultipartFile</span> è·å–ä¸Šä¼ çš„æ–‡ä»¶æ•°æ®ï¼Œå†é€šè¿‡transferToæ–¹æ³•å°†å…¶å†™å…¥åˆ°ç£ç›˜ä¸­
<span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>multipart<span class="token punctuation">.</span></span><span class="token class-name">MultipartFile</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">File</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileUploadController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/upload"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">up</span><span class="token punctuation">(</span><span class="token class-name">String</span> nickname<span class="token punctuation">,</span> <span class="token class-name">MultipartFile</span> photo<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>nickname<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è·å–å›¾ç‰‡çš„åŸå§‹åç§°</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>photo<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å–æ–‡ä»¶ç±»å‹</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>photo<span class="token punctuation">.</span><span class="token function">getContentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> path <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">"/upload/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">saveFile</span><span class="token punctuation">(</span>photo<span class="token punctuation">,</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">"ä¸Šä¼ æˆåŠŸ"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token comment">//</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">saveFile</span><span class="token punctuation">(</span><span class="token class-name">MultipartFile</span> photo<span class="token punctuation">,</span><span class="token class-name">String</span> path<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
<span class="token comment">//       åˆ¤æ–­å­˜å‚¨çš„ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»º</span>
        <span class="token class-name">File</span> dir <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>dir<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token comment">//          åˆ›å»ºç›®å½•</span>
            dir<span class="token punctuation">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>path<span class="token operator">+</span>photo<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        photo<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4ã€æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_4ã€æµ‹è¯•" aria-hidden="true">#</a> 4ã€æµ‹è¯•ğŸŒ¾</h3>
<p><img src="C:\Users\ZZZYY\AppData\Roaming\Typora\typora-user-images\image-20221121155106370.png" alt="image-20221121155106370"></p>
</div></template>



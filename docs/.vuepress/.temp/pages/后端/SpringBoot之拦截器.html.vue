<template><div><h1 id="springbootä¹‹æ‹¦æˆªå™¨" tabindex="-1"><a class="header-anchor" href="#springbootä¹‹æ‹¦æˆªå™¨" aria-hidden="true">#</a> SpringBootä¹‹æ‹¦æˆªå™¨</h1>
<h3 id="_1ã€æ‹¦æˆªå™¨ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#_1ã€æ‹¦æˆªå™¨ç®€ä»‹" aria-hidden="true">#</a> 1ã€æ‹¦æˆªå™¨ç®€ä»‹ğŸ </h3>
<div class="language-text line-numbers-mode" data-ext="text"><pre v-pre class="language-text"><code>1ã€æ‹¦æˆªå™¨åœ¨Webç³»ç»Ÿä¸­éå¸¸å¸¸è§ï¼Œå¯¹äºæŸäº›å…¨å±€ç»Ÿä¸€çš„æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒæå–åˆ°æ‹¦æˆªå™¨ä¸­å®ç°ã€‚æ€»ç»“èµ·æ¥ï¼Œæ‹¦æˆªå™¨å¤§è‡´æœ‰ä»¥ä¸‹å‡ ç§ä½¿ç”¨åœºæ™¯ï¼š
2ã€æƒé™æ£€æŸ¥ï¼šå¦‚ç™»å½•æ£€æµ‹ï¼Œè¿›å…¥å¤„ç†ç¨‹åºæ£€æµ‹æ˜¯å¦ç™»å½•ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™ç›´æ¥è¿”å›ç™»å½•é¡µé¢ã€‚
3ã€æ€§èƒ½ç›‘æ§ï¼šæœ‰æ—¶ç³»ç»Ÿåœ¨æŸæ®µæ—¶é—´è«åå…¶å¦™å¾ˆæ…¢ï¼Œå¯ä»¥é€šè¿‡æ‹¦æˆªå™¨åœ¨è¿›å…¥å¤„ç†ç¨‹åºä¹‹å‰è®°å½•å¼€å§‹æ—¶é—´ï¼Œåœ¨å¤„ç†å®Œåè®°å½•ç»“æŸæ—¶é—´ï¼Œä»è€Œå¾—åˆ°è¯¥è¯·æ±‚çš„å¤„ç†æ—¶é—´
4ã€é€šç”¨è¡Œä¸ºï¼šè¯»å–cookieå¾—åˆ°ç”¨æˆ·ä¿¡æ¯å¹¶å°†ç”¨æˆ·å¯¹è±¡æ”¾å…¥è¯·æ±‚ï¼Œä»è€Œæ–¹ä¾¿åç»­æµç¨‹ä½¿ç”¨ï¼Œè¿˜æœ‰æå–Localeã€Themeä¿¡æ¯ç­‰ï¼Œåªè¦æ˜¯å¤šä¸ªå¤„ç†ç¨‹åºéƒ½éœ€è¦çš„ï¼Œå³å¯ä½¿ç”¨æ‹¦æˆªå™¨å®ç°ã€‚
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2ã€æ‹¦æˆªå™¨ä¸‰ç§æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#_2ã€æ‹¦æˆªå™¨ä¸‰ç§æ–¹æ³•" aria-hidden="true">#</a> 2ã€æ‹¦æˆªå™¨ä¸‰ç§æ–¹æ³•â›¹ï¸â€â™€ï¸</h3>
<div class="language-text line-numbers-mode" data-ext="text"><pre v-pre class="language-text"><code>1ã€Spring Bootå®šä¹‰äº†HandlerInterceptoræ¥å£æ¥å®ç°è‡ªå®šä¹‰æ‹¦æˆªå™¨çš„åŠŸèƒ½
2ã€HandlerInterceptoræ¥å£å®šä¹‰äº†preHandleã€postHandleã€afterCompletionä¸‰ç§æ–¹æ³•ï¼Œé€šè¿‡é‡å†™è¿™ä¸‰ç§æ–¹æ³•å®ç°è¯·æ±‚å‰ã€è¯·æ±‚åç­‰æ“ä½œ
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="C:\Users\ZZZYY\AppData\Roaming\Typora\typora-user-images\image-20221121160520366.png" alt="image-20221121160520366"></p>
<h3 id="_3ã€æ‹¦æˆªå™¨å®šä¹‰" tabindex="-1"><a class="header-anchor" href="#_3ã€æ‹¦æˆªå™¨å®šä¹‰" aria-hidden="true">#</a> 3ã€æ‹¦æˆªå™¨å®šä¹‰ğŸ›°ï¸</h3>
<div class="language-java line-numbers-mode" data-ext="java"><pre v-pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>interceptor</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">HandlerInterceptor</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginInterceptor</span> <span class="token keyword">implements</span> <span class="token class-name">HandlerInterceptor</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">preHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"LoginInterceptor"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4ã€æ‹¦æˆªå™¨æ³¨å†Œ" tabindex="-1"><a class="header-anchor" href="#_4ã€æ‹¦æˆªå™¨æ³¨å†Œ" aria-hidden="true">#</a> 4ã€æ‹¦æˆªå™¨æ³¨å†ŒğŸ¥Š</h3>
<div class="language-java line-numbers-mode" data-ext="java"><pre v-pre class="language-java"><code><span class="token number">1</span>ã€addPathPatternsæ–¹æ³•å®šä¹‰æ‹¦æˆªçš„åœ°å€
<span class="token number">2</span>ã€excludePathPatternså®šä¹‰æ’é™¤æŸäº›åœ°å€ä¸è¢«æ‹¦æˆª
<span class="token number">3</span>ã€æ·»åŠ çš„ä¸€ä¸ªæ‹¦æˆªå™¨æ²¡æœ‰addPathPatternä»»ä½•ä¸€ä¸ªurlåˆ™é»˜è®¤æ‹¦æˆªæ‰€æœ‰è¯·æ±‚
<span class="token number">4</span>ã€å¦‚æœæ²¡æœ‰excludePathPatternsä»»ä½•ä¸€ä¸ªè¯·æ±‚ï¼Œåˆ™é»˜è®¤ä¸æ”¾è¿‡ä»»ä½•ä¸€ä¸ªè¯·æ±‚ã€‚

<span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>interceptor<span class="token punctuation">.</span></span><span class="token class-name">LoginInterceptor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">InterceptorRegistry</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ResourceHandlerRegistry</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebMvcConfigurer</span></span><span class="token punctuation">;</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addInterceptors</span><span class="token punctuation">(</span><span class="token class-name">InterceptorRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">LoginInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addPathPatterns</span><span class="token punctuation">(</span><span class="token string">"/user/**"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></template>


